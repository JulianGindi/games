pico-8 cartridge // http://www.pico-8.com
version 18
__lua__


function _init()
    startx=10
    starty=10
    char_spr=16
    cash_spr=10

    -- player object
    player={}

    -- player position
    player.speed=8
    player.x=startx
    player.y=starty
    player.actual_x=startx*player.speed
    player.actual_y=starty*player.speed

    -- encoded map information
    maps = {}
    maps.beachfront = {}
    maps.beachfront.x = 0
    maps.beachfront.y = 0

    maps.mainhall = {}
    maps.mainhall.x = 16
    maps.mainhall.y = 0

    --initial coordinates of starting map
    current_map = "beachfront"


    -- player inventory
    player.inventory={}
    player.money=1000 -- starting jeff out with 100 buckaroos
end

function _update()
    move_character()
    is_on_beach()
end

-- DRAWING FUNCTIONALITY

function _draw()
    cls()
    map(maps[current_map].x,maps[current_map].y, 0, 0)
    draw_character()
    draw_cash()
    draw_ui()

    player_map_move = player_off_map()
    if player_map_move == 1 then
        current_map = "mainhall"
        map(maps[current_map].x,maps[current_map].y, 0, 0)
        reset_character()
    end
end

function draw_ui()
    print("$", 103, 0, 11)
    print(player.money, 108, 0, 11)
    print("m", 124, 0, 11)
end

-- ECONOMY AND MONEY
function draw_cash()
    spr(cash_spr, 80, 80)
end

-- CHARACTER FUNCTIONALITY

function draw_character()
    spr(char_spr,player.x*player.speed,player.y*player.speed)
end

function reset_character()
    player.x = startx
    player.y = starty
end

function is_on_beach()
    if current_map == 0 then
        sfx(9, 1)
    else
        sfx(-1)
    end
end

-- returns a direction indicating which direction off the map the player moved
function player_off_map()
    if player.x > 15 then
        return 1 --right
    elseif player.x < 0 then
        return 2 --left
    elseif player.y > 15 then
        return 3
    elseif player.y < 0 then
        return 4
    else
        return 0
    end
end

function move_character()
    if btnp(1) then
        player.x+=1
    elseif btnp(0) then
        player.x-=1
    elseif btnp(2) then
        player.y-=1
    elseif btnp(3) then
        player.y+=1
    end
end





__gfx__
00000000fffffff9f7ffffff4444444433333333ccccccccffffffff444444446666666666666666444aa444a0c0a0c000000000000000000000000000000000
00000000ffffff94ffffff7f3333333333333333ccccccccffffffff44444444665665666666666644aaaa440c0a0c0a00000000000000000000000000000000
00700700fffff934ffffffff3333333333333333ccccccccffffffff4444444466666666656656654aaaa7a4c0a0c0a000000000000000000000000000000000
00077000ffff9344ff7fffff3333333333333333ccccccccffffffff444444446666666666666666aaaa77aa0a0c0a0c00000000000000000000000000000000
00077000fff94444fffff7ff3333333333333333ccccccccffffffff444444446656656666666666aaaaaaaaa0c0a0c000000000000000000000000000000000
00700700ff934444fffff7ff3333333333333333ccccccccffffffff4444444466666666656656654aaaaaa40c0a0c0a00000000000000000000000000000000
00000000f9444444ff7fffff3333333333333333ccccccccffffffff44444444666666666666666644aaaa44c0a0c0a000000000000000000000000000000000
0000000094444444ffffffff4444444433333333ccccccccffffffff444444446656656666666666444aa4440a0c0a0c00000000000000000000000000000000
000ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0e2ee2e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0e2222e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0e2222e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00200200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00e00e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cc00cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444446644444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444466664444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444566665444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44446666666644440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44456666666654440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44666666666666440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
45616666666616540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66616661166616660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66616661661616660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
45611661661116540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44666661166666440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44456666166654440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44446661166644440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444566665444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444466664444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444446644444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
050505050505050502060606060107070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050505050202060606010707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050505020606060601070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505050502060606060107070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050505020206060606010707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050502060606060601070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050202060606060107070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
020206060606010707070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
020606060601070707070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
060606060107072021070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
060606010707073031070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
060601070707070707070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
060107070707070707070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010707070707070707070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
070707070707070707070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
070707070707070707070707070707070b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000000660076100c6301265014670136700b670006401966019670186101e61025620296402d6702c620246201c6501766013660106400f6400e61011610186201e620116400360000610006200063000660
000200000000021050270702c0003107034050000000000000000000001005015000180501c0002005024010280502c0502f01033050350500000000000000500a05013000190501f00022070260502b00030060
00100000000000f35023350283502b3502d350123501135013350173501a3501d3502435020350133501035014350173501a3501c3501d3501c3500c350093500a3500d350103500f35000000000000000000000
000100001955020550185500055022550235500055023550135500b55000550245500255025550005502555001550125502555025550015502755002550255500055024550005502355001550175502355022550
00100000106501565021650276502c6502f650306503265032650316502d65029650216501c65018650166501665017650196501e6502165024650286502b6502d6502e6502e6502f6502e6502d6502d6502c650
000c0000000000007000070098501285024850228501e850088500b8501685022850128500d85018850268502b850298501985012850158501c85020850278502c8501e8501085014850178501d8501785000000
0005000000a501da501fa502645023a5026a5028a502ba500da502da502fa5030a5031a702345031a5031a6031a2019a5031a5030a502fa5019a502da5018a502ca502aa5017a5028a5017a5025a5023a5015a50
001005031f7502c7502f750327503b7503a750397503875038750367500e7501075012750147500c7501a7501d7502475026750297502b7502b7502b7502b7502a75011050287502775026750257502375021750
001000000b1200b1300b1400b1700b1700a1500b1100d1200d1400d1600d1700d1700d1700e1200e1300e1500e1600d1700d1700d1700d1100c1300c1400c1600c1700c1700c1700d1100d1300d1400d1600d170
0010000005c200ac300fc4013c5016c2018c2019c3018c4016c5013c5010c100dc200ac3007c4005c5003c6002c1003c2005c3007c5009c600dc4010c1012c3013c3014c4014c5014c1013c2011c300cc4005c60
__music__
00 07080949

